<div class='container'>
  <div class='row'>
    <h1>Reserva</h1>
      <div class="mb-4">
        <label class="form-label">Data e hora</label>
        <input class="form-control date" id="<%= @data %>" value="<%= @data %>" readonly />
        <label class="form-label">Descrição</label>
        <textarea class="form-control description" rows="4" cols="50"></textarea>
        <button type="button" class="btn btn-dark mt-4 button" onclick="submit()" required >Reservar</button>
      </div>
  </div>
</div>

<script type="text/javascript">
  function submit() {
    let date = document.getElementsByClassName("date")[0].id;
    let description = document.getElementsByClassName("description")
    let getUrl = window.location;
    let baseUrl = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1];
    fetch(`${baseUrl}`, {
    method: 'POST',
    headers: {'Content-Type':'application/x-www-form-urlencoded'}, 
    body: `date=${date}&description=${description[0].value}`
    })
    .then(response => response.json())
    window.location.href = baseUrl;
  }
</script>
